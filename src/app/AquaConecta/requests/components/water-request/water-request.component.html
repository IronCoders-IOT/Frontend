<app-header-content></app-header-content>

<div class="request-container">

  <div class="request-title-search">
    <h1 class="title-request">Supply Requests</h1>

    <div class="search-container">

      <div class="filter-container">
        <mat-form-field appearance="outline">
          <mat-label>Buscar ID</mat-label>
          <input matInput (input)="applyStatusFilter($event)" placeholder="MM (Ej: 102)">
        </mat-form-field>
      </div>
    </div>
  </div>


  <div class="example-container mat-elevation-z8">
    @if (isLoadingResults || isRateLimitReached) {
      <div class="example-loading-shade">
        @if (isLoadingResults) {
          <mat-spinner></mat-spinner>
        }
        @if (isRateLimitReached) {
          <div class="example-rate-limit-reached">
            GitHub's API rate limit has been reached. It will be reset in one minute.
          </div>
        }
      </div>
    }

    <div class="example-table-container">

      <table mat-table [dataSource]="requests" class="example-table" matSort>
        <!-- Number Column -->
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>
          <td mat-cell *matCellDef="let row">{{ row.id }}</td>
        </ng-container>

        <!-- Title Column -->
        <ng-container matColumnDef="resident_id">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Resident ID</th>
          <td mat-cell *matCellDef="let row">{{ row.resident_id }}</td>
        </ng-container>

        <!-- State Column -->
        <ng-container matColumnDef="provider_id">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Provider ID</th>
          <td mat-cell *matCellDef="let row">{{ row.provider_id }}</td>
        </ng-container>

        <!-- Created Column -->
        <ng-container matColumnDef="request_liters">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Request Liters</th>
          <td mat-cell *matCellDef="let row">{{ row.request_liters }}</td>
        </ng-container>

        <!-- Status Column -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
          <td mat-cell *matCellDef="let row">{{ row.status }}</td>
        </ng-container>

        <!-- Delivered At Column -->
        <ng-container matColumnDef="delivered_at">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Delivered At</th>
          <td mat-cell *matCellDef="let row">{{ row.delivered_at | date }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>

    <mat-paginator [length]="resultsLength" [pageSize]="30" aria-label="Select page of GitHub search results"></mat-paginator>
  </div>


</div>


