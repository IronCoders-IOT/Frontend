import { Injectable } from '@angular/core';
import { LanguageService } from './language.service';

@Injectable({
  providedIn: 'root'
})
export class TranslationService {
  private translations: { [key: string]: { [key: string]: string } } = {
    en: {
      // Home page
      'welcome': 'Welcome',
      'water_management_dashboard': 'Your comprehensive water management dashboard',
      'view_profile': 'View Profile',
      'sign_out': 'Sign Out',
      'language': 'Language',
      
      // Dashboard cards
      'water_requests': 'Water Requests',
      'active_water_requests': 'Active water supply requests awaiting approval and processing',
      'pending': 'Pending',
      'total_requests': 'Total Requests',
      'view_all_requests': 'View all requests',
      
      'service_reports': 'Service Reports',
      'maintenance_reports': 'Maintenance reports and service issues from residents',
      'active': 'Active',
      'total_reports': 'Total Reports',
      'view_all_reports': 'View all reports',
      
      'residents': 'Residents',
      'total_residents': 'Total number of residents registered in the system',
      'active_community': 'Active Community',
      'view_residents_list': 'View residents list',
      'registered': 'Registered',
      
      'sensor_monitoring': 'Sensor Monitoring',
      'realtime_monitoring': 'Real-time monitoring of water quality and flow sensors',
      'live_data': 'Live Data',
      'view_sensor_history': 'View sensor history',
      'active_sensors': 'Active Sensors',
      
      // Admin Dashboard
      'admin_dashboard': 'Dashboard',
      'system_overview': 'System Overview',
      'manage_system': 'Manage and monitor your AquaConecta system',
      'providers': 'Providers',
      'manage_providers': 'Manage water service providers',
      'users': 'Users',
      'system_settings': 'System Settings',
      'configure_system': 'Configure system parameters and settings',
      
      // Auth - Login
      'welcome_back': 'Welcome back! Please enter your details',
      'username': 'Username',
      'username_placeholder': 'Username',
      'username_required': 'Username is required',
      'password': 'Password',
      'password_placeholder': 'Password',
      'password_required': 'Password is required',
      'password_minlength': 'Password must be at least 6 characters',
      'signing_in': 'Signing in...',
      'sign_in': 'Sign in',
      'dont_have_account': "Don't have an account?",
      'sign_up_here': 'Sign up here',
      
      // Auth - Signup
      'lets_get_started': "Let's get started",
      'first_name': 'First Name',
      'first_name_placeholder': 'John',
      'first_name_required': 'First name is required',
      'last_name': 'Last Name',
      'last_name_placeholder': 'Doe',
      'last_name_required': 'Last name is required',
      'email_address': 'Email Address',
      'email_placeholder': 'john@company.com',
      'email_required': 'Email is required',
      'email_invalid': 'Please enter a valid email',
      'phone_number': 'Phone Number',
      'phone_placeholder': '+51 999 999 999',
      'phone_required': 'Phone is required',
      'continue': 'Continue',
      'company_information': 'Company Information',
      'company_name': 'Company Name',
      'company_placeholder': 'Your Company Ltd.',
      'company_required': 'Company name is required',
      'ruc': 'RUC',
      'ruc_placeholder': '20123456789',
      'ruc_required': 'RUC is required',
      'id_type': 'ID Type',
      'select': 'Select',
      'dni': 'DNI',
      'passport': 'Passport',
      'carnet': 'Carnet',
      'document_type_required': 'Document type is required',
      'document_number': 'Document Number',
      'document_number_placeholder': '12345678',
      'document_number_required': 'Document number is required',
      'back': 'Back',
      'almost_done': 'Almost done!',
      'address': 'Address',
      'optional': 'Optional',
      'address_placeholder': '123 Main Street, Lima',
      'password_signup_placeholder': 'At least 8 characters',
      'password_signup_minlength': 'Password must be at least 8 characters',
      'confirm_password': 'Confirm Password',
      'confirm_password_placeholder': 'Repeat your password',
      'confirm_password_required': 'Password confirmation is required',
      'passwords_no_match': 'Passwords do not match',
      'creating_account': 'Creating account...',
      'create_account': 'Create Account',
      'already_have_account': 'Already have an account?',
      'sign_in_here': 'Sign in here',
      
      // Admin Dashboard - Additional sections
      'reports_requests': 'Reports & Requests',
      'financial_overview': 'Financial Overview',
      'total_revenue': 'Total Revenue',
      'total_revenue_description': 'Total revenue generated from all sensors',
      'current_month_revenue': 'Current Month Revenue',
      'current_month_revenue_description': 'Projected revenue for the current month',
      'system_health_status': 'System Health Status',
      'water_quality': 'Water Quality',
      'water_quality_description': 'Average water quality across all providers',
      'sensor_health': 'Sensor Health',
      'sensor_health_description': 'Overall sensor operational status',
      'system_uptime': 'System Uptime',
      'system_uptime_description': 'AquaConecta system availability',
      'recent_activity': 'Recent Activity',
      'new_providers': 'New Providers',
      'id': 'ID',
      'company': 'Company',
      'status': 'Status',
      'view_all_providers': 'View all providers',
      'recent_water_requests': 'Recent Water Requests',
      'resident': 'Resident',
      'date': 'Date',
      'recent_reports': 'Recent Reports',
      'title': 'Title',
      'received': 'Received',
      'in_progress': 'In Progress',
      'closed': 'Closed',
      
      // Header Navigation
      'residents_nav': 'Residents',
      'reports_nav': 'Reports', 
      'requests_nav': 'Requests',
      'providers_nav': 'Providers',
      'admin_dashboard_nav': 'Admin Dashboard',
      'home_nav': 'Home',
      
      // Page Titles
      'providers_title': 'Providers',
      'report_requests_title': 'Report Requests',
      'water_requests_title': 'Water Requests',
      'residents_title': 'Residents',
      'search_placeholder': 'Enter ID',
      'search_button': 'Search',
      'filter_by_provider': 'Filter by Provider',
      'all_providers': 'All Providers',
      
      // Residents - Create Resident
      'new_resident': 'New Resident',
      'first_name_resident': 'First Name',
      'first_name_placeholder_resident': 'e.g. Italo',
      'first_name_required_resident': 'First Name is required.',
      'last_name_resident': 'Last Name',
      'last_name_placeholder_resident': 'e.g. Kunimoto',
      'last_name_required_resident': 'Last Name is required.',
      'document_type_resident': 'Document Type',
      'select_document_type': 'Select a document type',
      'document_type_required_resident': 'Document Type is required.',
      'document_number_resident': 'Document Number',
      'document_number_placeholder_resident': 'e.g. 71323245',
      'document_number_required_resident': 'Document Number is required.',
      'direction_resident': 'Direction',
      'direction_placeholder_resident': 'e.g. Av. Los Pinos 123',
      'direction_required_resident': 'Direction is required.',
      'direction_minlength_resident': 'Direction must be at least 5 characters.',
      'email_resident': 'Email',
      'email_placeholder_resident': 'e.g. tato@gmail.com',
      'email_required_resident': 'Email is required.',
      'email_invalid_resident': 'Enter a valid email.',
      'phone_resident': 'Phone',
      'phone_placeholder_resident': 'e.g. 979561238',
      'phone_required_resident': 'Phone is required.',
      'phone_pattern_resident': 'Phone must have exactly 9 digits.',
      'passwords_no_match_resident': 'Passwords do not match.',
      'payment_for_registration': 'Payment for Resident Registration',
      'complete_fields_message': 'Please complete all resident information fields to enable payment',
      'amount_to_pay': 'Amount to pay:',
      'payment_successful_creating': 'Payment Successful! Creating Resident...',
      'please_wait_message': 'Please wait, this may take a few moments.',
      
      // Residents - List
      'residents_list_title': 'Residents',
      'new_resident_link': 'New Resident',
      'name_column': 'Name',
      'last_name_column': 'Last Name',
      'phone_column': 'Phone',
      'address_column': 'Address',
      'action_column': 'Action',
      'view_more': 'View more',
      
      // View History - Residents
      'doc_number': 'Doc. Number',
      'subscriptions': 'Subscriptions',
      'sensor': 'Sensor',
      'start_date': 'Start Date',
      'end_date': 'End Date',
      
      // Water Requests
      'supply_requests': 'Supply Requests',
      'emission_date': 'Emission Date',
      'request_liters': 'Request Liters',
      'delivered_at': 'Delivered At',
      'schedule_date': 'Schedule a date',
      'github_rate_limit': 'GitHub\'s API rate limit has been reached. It will be reset in one minute.',
      
      // Providers
      'tax': 'Tax',
      'ruc_column': 'Ruc',
      'email_column': 'Email',
      
      // Report Requests
      'report_requests': 'Report Requests',
      
      // Provider Detail - Active Residents
      'active_residents': 'Active Residents',
      'first_name_header': 'First name',
      'last_name_header': 'Last name',
      
      // Time formatters
      'live': 'Live',
      'min_ago': 'min ago',
      'h_ago': 'h ago',
      'd_ago': 'd ago',
      
      // Menu options
      'water_request_option': 'Water Request',
      'login_option': 'Login',
      'signup_option': 'Sign Up',
      'reports_list_option': 'Reports List',
      'providers_list_option': 'Providers List',
      'provider_details_option': 'Provider Details',
      
      // Schedule Date Component
      'resident_info': 'Resident',
      'water_quantity_request': 'Water Quantity Request (Liters)',
      'emission_date_label': 'Emission Date:',
      'status_label': 'Status:',
      'in_progress_status': 'In Progress',
      'closed_status': 'Closed',
      'delivered_date_label': 'Delivered Date:',
      'cancel_button': 'Cancel',
      'save_button': 'Save',
      
      // Provider Components
      'provider_profile': 'Provider Profile',
      'provider_details': 'Provider Details',
      'company_information_title': 'Company Information',
      'contact_information': 'Contact Information',
      'service_areas': 'Service Areas',
      'performance_metrics': 'Performance Metrics',
      'total_sensors': 'Total Sensors',
      'sensors_active': 'Active Sensors',
      'coverage_area': 'Coverage Area',
      'service_quality': 'Service Quality',
      'response_time': 'Response Time',
      'customer_satisfaction': 'Customer Satisfaction',
      'edit_profile': 'Edit Profile',
      'cancel': 'Cancel',
      'save_changes': 'Save Changes',
      'saving': 'Saving...',
      'loading_provider_info': 'Loading provider information...',
      'unable_load_provider': 'Unable to load provider data',
      'problem_retrieving_info': 'There was a problem retrieving the provider information. Please try again.',
      'retry': 'Retry',
      'company_name_label': 'Company Name',
      'company_name_required_error': 'Company name is required',
      'ruc_required_error': 'RUC is required',
      'ruc_pattern_error': 'RUC must be 11 digits',
      'number_sensors_label': 'Number of Sensors',
      'sensors_positive_error': 'Number of sensors must be positive',
      'email_required_error': 'Email is required',
      'valid_email_error': 'Please enter a valid email',
      'phone_required_error': 'Phone is required',
      'phone_pattern_error': 'Phone must be 9 digits',
      'address_required_error': 'Address is required',
      'view_active_plans': 'View Active Plans'
    },
    es: {
      // Home page
      'welcome': 'Bienvenido',
      'water_management_dashboard': 'Tu panel integral de gestión del agua',
      'view_profile': 'Ver Perfil',
      'sign_out': 'Cerrar Sesión',
      'language': 'Idioma',
      
      // Dashboard cards
      'water_requests': 'Solicitudes de Agua',
      'active_water_requests': 'Solicitudes activas de suministro de agua pendientes de aprobación y procesamiento',
      'pending': 'Pendiente',
      'total_requests': 'Total de Solicitudes',
      'view_all_requests': 'Ver todas las solicitudes',
      
      'service_reports': 'Reportes de Servicio',
      'maintenance_reports': 'Reportes de mantenimiento y problemas de servicio de los residentes',
      'active': 'Activo',
      'total_reports': 'Total de Reportes',
      'view_all_reports': 'Ver todos los reportes',
      
      'residents': 'Residentes',
      'total_residents': 'Número total de residentes registrados en el sistema',
      'active_community': 'Comunidad Activa',
      'view_residents_list': 'Ver lista de residentes',
      'registered': 'Registrados',
      
      'sensor_monitoring': 'Monitoreo de Sensores',
      'realtime_monitoring': 'Monitoreo en tiempo real de sensores de calidad y flujo de agua',
      'live_data': 'Datos en Vivo',
      'view_sensor_history': 'Ver historial de sensores',
      'active_sensors': 'Sensores Activos',
      
      // Admin Dashboard
      'admin_dashboard': 'Panel de Administración',
      'system_overview': 'Vista General del Sistema',
      'manage_system': 'Gestiona y monitorea tu sistema AquaConecta',
      'providers': 'Proveedores',
      'manage_providers': 'Gestionar proveedores de servicios de agua',
      'users': 'Usuarios',
      'system_settings': 'Configuración del Sistema',
      'configure_system': 'Configurar parámetros y ajustes del sistema',
      
      // Auth - Login
      'welcome_back': '¡Bienvenido de vuelta! Por favor, ingresa tus datos',
      'username': 'Nombre de Usuario',
      'username_placeholder': 'Nombre de Usuario',
      'username_required': 'El nombre de usuario es requerido',
      'password': 'Contraseña',
      'password_placeholder': 'Contraseña',
      'password_required': 'La contraseña es requerida',
      'password_minlength': 'La contraseña debe tener al menos 6 caracteres',
      'signing_in': 'Iniciando sesión...',
      'sign_in': 'Iniciar Sesión',
      'dont_have_account': '¿No tienes una cuenta?',
      'sign_up_here': 'Regístrate aquí',
      
      // Auth - Signup
      'lets_get_started': 'Empecemos',
      'first_name': 'Nombre',
      'first_name_placeholder': 'Juan',
      'first_name_required': 'El nombre es requerido',
      'last_name': 'Apellido',
      'last_name_placeholder': 'Pérez',
      'last_name_required': 'El apellido es requerido',
      'email_address': 'Correo Electrónico',
      'email_placeholder': 'juan@empresa.com',
      'email_required': 'El correo electrónico es requerido',
      'email_invalid': 'Por favor ingresa un correo válido',
      'phone_number': 'Número de Teléfono',
      'phone_placeholder': '+51 999 999 999',
      'phone_required': 'El teléfono es requerido',
      'continue': 'Continuar',
      'company_information': 'Información de la Empresa',
      'company_name': 'Nombre de la Empresa',
      'company_placeholder': 'Tu Empresa S.A.C.',
      'company_required': 'El nombre de la empresa es requerido',
      'ruc': 'RUC',
      'ruc_placeholder': '20123456789',
      'ruc_required': 'El RUC es requerido',
      'id_type': 'Tipo de Documento',
      'select': 'Seleccionar',
      'dni': 'DNI',
      'passport': 'Pasaporte',
      'carnet': 'Carnet',
      'document_type_required': 'El tipo de documento es requerido',
      'document_number': 'Número de Documento',
      'document_number_placeholder': '12345678',
      'document_number_required': 'El número de documento es requerido',
      'back': 'Atrás',
      'almost_done': '¡Casi terminamos!',
      'address': 'Dirección',
      'optional': 'Opcional',
      'address_placeholder': 'Jr. Los Olivos 123, Lima',
      'password_signup_placeholder': 'Al menos 8 caracteres',
      'password_signup_minlength': 'La contraseña debe tener al menos 8 caracteres',
      'confirm_password': 'Confirmar Contraseña',
      'confirm_password_placeholder': 'Repite tu contraseña',
      'confirm_password_required': 'La confirmación de contraseña es requerida',
      'passwords_no_match': 'Las contraseñas no coinciden',
      'creating_account': 'Creando cuenta...',
      'create_account': 'Crear Cuenta',
      'already_have_account': '¿Ya tienes una cuenta?',
      'sign_in_here': 'Inicia sesión aquí',
      
      // Admin Dashboard - Additional sections
      'reports_requests': 'Reportes y Solicitudes',
      'financial_overview': 'Resumen Financiero',
      'total_revenue': 'Ingresos Totales',
      'total_revenue_description': 'Ingresos totales generados por todos los sensores',
      'current_month_revenue': 'Ingresos del Mes Actual',
      'current_month_revenue_description': 'Ingresos proyectados para el mes actual',
      'system_health_status': 'Estado de Salud del Sistema',
      'water_quality': 'Calidad del Agua',
      'water_quality_description': 'Calidad promedio del agua en todos los proveedores',
      'sensor_health': 'Salud de Sensores',
      'sensor_health_description': 'Estado operacional general de los sensores',
      'system_uptime': 'Tiempo de Actividad del Sistema',
      'system_uptime_description': 'Disponibilidad del sistema AquaConecta',
      'recent_activity': 'Actividad Reciente',
      'new_providers': 'Nuevos Proveedores',
      'id': 'ID',
      'company': 'Empresa',
      'status': 'Estado',
      'view_all_providers': 'Ver todos los proveedores',
      'recent_water_requests': 'Solicitudes de Agua Recientes',
      'resident': 'Residente',
      'date': 'Fecha',
      'recent_reports': 'Reportes Recientes',
      'title': 'Título',
      'received': 'Recibido',
      'in_progress': 'En Progreso',
      'closed': 'Cerrado',
      
      // Header Navigation
      'residents_nav': 'Residentes',
      'reports_nav': 'Reportes',
      'requests_nav': 'Solicitudes', 
      'providers_nav': 'Proveedores',
      'admin_dashboard_nav': 'Panel de Administración',
      'home_nav': 'Inicio',
      
      // Page Titles
      'providers_title': 'Proveedores',
      'report_requests_title': 'Solicitudes de Reporte',
      'water_requests_title': 'Solicitudes de Agua',
      'residents_title': 'Residentes',
      'search_placeholder': 'Ingrese ID',
      'search_button': 'Buscar',
      'filter_by_provider': 'Filtrar por Proveedor',
      'all_providers': 'Todos los Proveedores',
      
      // Residents - Create Resident
      'new_resident': 'Nuevo Residente',
      'first_name_resident': 'Nombre',
      'first_name_placeholder_resident': 'ej. Italo',
      'first_name_required_resident': 'El nombre es requerido.',
      'last_name_resident': 'Apellido',
      'last_name_placeholder_resident': 'ej. Kunimoto', 
      'last_name_required_resident': 'El apellido es requerido.',
      'document_type_resident': 'Tipo de Documento',
      'select_document_type': 'Seleccione un tipo de documento',
      'document_type_required_resident': 'El tipo de documento es requerido.',
      'document_number_resident': 'Número de Documento',
      'document_number_placeholder_resident': 'ej. 71323245',
      'document_number_required_resident': 'El número de documento es requerido.',
      'direction_resident': 'Dirección',
      'direction_placeholder_resident': 'ej. Av. Los Pinos 123',
      'direction_required_resident': 'La dirección es requerida.',
      'direction_minlength_resident': 'La dirección debe tener al menos 5 caracteres.',
      'email_resident': 'Correo Electrónico',
      'email_placeholder_resident': 'ej. tato@gmail.com',
      'email_required_resident': 'El correo electrónico es requerido.',
      'email_invalid_resident': 'Ingrese un correo válido.',
      'phone_resident': 'Teléfono',
      'phone_placeholder_resident': 'ej. 979561238',
      'phone_required_resident': 'El teléfono es requerido.',
      'phone_pattern_resident': 'El teléfono debe tener exactamente 9 dígitos.',
      'passwords_no_match_resident': 'Las contraseñas no coinciden.',
      'payment_for_registration': 'Pago para Registro de Residente',
      'complete_fields_message': 'Por favor complete todos los campos de información del residente para habilitar el pago',
      'amount_to_pay': 'Monto a pagar:',
      'payment_successful_creating': '¡Pago Exitoso! Creando Residente...',
      'please_wait_message': 'Por favor espere, esto puede tomar unos momentos.',
      
      // Residents - List
      'residents_list_title': 'Residentes',
      'new_resident_link': 'Nuevo Residente',
      'name_column': 'Nombre',
      'last_name_column': 'Apellido',
      'phone_column': 'Teléfono',
      'address_column': 'Dirección',
      'action_column': 'Acción',
      'view_more': 'Ver más',
      
      // View History - Residents
      'doc_number': 'Núm. Doc.',
      'subscriptions': 'Suscripciones',
      'sensor': 'Sensor',
      'start_date': 'Fecha de Inicio',
      'end_date': 'Fecha de Fin',
      
      // Water Requests
      'supply_requests': 'Solicitudes de Suministro',
      'emission_date': 'Fecha de Emisión',
      'request_liters': 'Litros Solicitados',
      'delivered_at': 'Entregado en',
      'schedule_date': 'Programar una fecha',
      'github_rate_limit': 'Se ha alcanzado el límite de velocidad de la API de GitHub. Se restablecerá en un minuto.',
      
      // Providers
      'tax': 'Impuesto',
      'ruc_column': 'Ruc',
      'email_column': 'Correo',
      
      // Report Requests
      'report_requests': 'Solicitudes de Reporte',
      
      // Provider Detail - Active Residents
      'active_residents': 'Residentes Activos',
      'first_name_header': 'Nombre',
      'last_name_header': 'Apellido',
      
      // Time formatters
      'live': 'En Vivo',
      'min_ago': 'min atrás',
      'h_ago': 'h atrás',
      'd_ago': 'd atrás',
      
      // Menu options
      'water_request_option': 'Solicitud de Agua Potable',
      'login_option': 'Iniciar Sesión',
      'signup_option': 'Registrarse',
      'reports_list_option': 'Lista de Reportes',
      'providers_list_option': 'Lista de proveedores',
      'provider_details_option': 'Detalles del proveedor',
      
      // Schedule Date Component
      'resident_info': 'Residente',
      'water_quantity_request': 'Cantidad de Agua Solicitada (Litros)',
      'emission_date_label': 'Fecha de Emisión:',
      'status_label': 'Estado:',
      'in_progress_status': 'En Progreso',
      'closed_status': 'Cerrado',
      'delivered_date_label': 'Fecha de Entrega:',
      'cancel_button': 'Cancelar',
      'save_button': 'Guardar',
      
      // Provider Components
      'provider_profile': 'Perfil del Proveedor',
      'provider_details': 'Detalles del Proveedor',
      'company_information_title': 'Información de la Empresa',
      'contact_information': 'Información de Contacto',
      'service_areas': 'Áreas de Servicio',
      'performance_metrics': 'Métricas de Rendimiento',
      'total_sensors': 'Sensores Totales',
      'sensors_active': 'Sensores Activos',
      'coverage_area': 'Área de Cobertura',
      'service_quality': 'Calidad del Servicio',
      'response_time': 'Tiempo de Respuesta',
      'customer_satisfaction': 'Satisfacción del Cliente',
      'edit_profile': 'Editar Perfil',
      'cancel': 'Cancelar',
      'save_changes': 'Guardar Cambios',
      'saving': 'Guardando...',
      'loading_provider_info': 'Cargando información del proveedor...',
      'unable_load_provider': 'No se pudo cargar los datos del proveedor',
      'problem_retrieving_info': 'Hubo un problema al obtener la información del proveedor. Por favor, inténtelo nuevamente.',
      'retry': 'Reintentar',
      'company_name_label': 'Nombre de la Empresa',
      'company_name_required_error': 'El nombre de la empresa es requerido',
      'ruc_required_error': 'El RUC es requerido',
      'ruc_pattern_error': 'El RUC debe tener 11 dígitos',
      'number_sensors_label': 'Número de Sensores',
      'sensors_positive_error': 'El número de sensores debe ser positivo',
      'email_required_error': 'El correo electrónico es requerido',
      'valid_email_error': 'Por favor ingrese un correo válido',
      'phone_required_error': 'El teléfono es requerido',
      'phone_pattern_error': 'El teléfono debe tener 9 dígitos',
      'address_required_error': 'La dirección es requerida',
      'view_active_plans': 'Ver Planes Activos'
    }
  };

  constructor(private languageService: LanguageService) {
    // Suscribirse a cambios de idioma
    this.languageService.currentLanguage$.subscribe(() => {
      // Forzar actualización cuando cambie el idioma
    });
  }

  translate(key: string): string {
    const currentLang = this.languageService.getCurrentLanguage();
    return this.translations[currentLang]?.[key] || key;
  }

  get(key: string): string {
    return this.translate(key);
  }
}
